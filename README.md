# MimasA7-SLI
This repo serves a structured light illumination (SLI) system orchestrated by an FPGA controller, based on a Numato Mimas A7 Rev3 board powered by an Artix-7 FPGA. This borad has two HDMI shields, one for input and one for output. In this project, the FPGA takes HDMI video input from a host PC and outputs HDMI video to a DLP projector. A camera module will capture the images reflected by the scanned object and provide it to the host PC for resconsructing the surface. To synchroize the projection and cpature of each fram, the camera also interacts with the FPGA through the GPIO header, following a handsake protocol. A customized PCB board is utlized to brige the GPIO header with the Camera through a DB9 port.

The FPGA controller can works in two different modes:

1. Pass-trhough with top-left pixel detection
   -The FPGA works as a HDMI pass-through that is capbale of 720p@60Hz. The PC is charge of playing back the SLI patterns.
   -The FPGA reads the top-left pixel (TLP) value of each frame and display it (in hexdcemial) using 7-segment display
   -If the current frame has a diffrent TLP value from the preivous frame, the FPGA will send a pulse of 7 milliseconds to trigger the camera shuttle upon the next VSYNC period.
   -The host PC will not play the next frame until it confirms the cmaera is ready for the next trigger.

2. SD Pattern Generation
   - The FPGA takes input from the HDMI source and replace visible pixels of each frame with those from a predfined pattern, before pass them to the HDMI output.
   - The current pattern is a 24-frame sequence. Rach row of a frame contain identical pixel values that correlates to the row index. The very frist frame is defined by a LUT and other frames are derived by modfiying 
     the spatial frequency and the temproal frequency of the frist frame.
   - The LUT is pregenerated by SLI_LUT.m as a raw file LUT.raw stored in the SD card, that can be fectched into on-chip memory during boot time.
   - For each pixel value, 
